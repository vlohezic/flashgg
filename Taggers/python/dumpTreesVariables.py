

import flashgg.Taggers.globalVariables_cff as globalVars

#import FWCore.ParameterSet.Config as cms

#from globalVariables_cff import globalVariables

from flashgg.MicroAOD.flashggJets_cfi import flashggBTag
from flashgg.MicroAOD.flashggJets_cfi import flashggDeepCSVb
from flashgg.MicroAOD.flashggJets_cfi import flashggDeepCSVbb

dipho_variables = [ "nVtx                := diPhoton().nVert",
                    "diPhoMass           := diPhoton().mass", 
                    "diPhoMVA            := diPhotonMVA().result",
                    "diPhoPt             := diPhoton().pt",
                    "diPhoPtoM           := diPhoton().pt / diPhoton().mass", 
                    "diPhoEta            := diPhoton().eta",
                    "diPhoY              := diPhoton().rapidity",
                    "diPhoPhi            := diPhoton().phi",  
                    "diPhoVtxProbMVA     := diPhoton().vtxProbMVA", 
                    "diPhoSigmaRV        := diPhotonMVA().sigmarv",
                    "diPhoDecorrSigmaRV  := diPhotonMVA().decorrSigmarv",
                    "diPhoSigmaWV        := diPhotonMVA().sigmawv",
                    "diPhoCosPhi         := diPhotonMVA().CosPhi",
                    "pho1_pt             := diPhoton().leadingPhoton.pt",
                    "pho2_pt             := diPhoton().subLeadingPhoton.pt",
                    "pho1_hasPixelSeed   := diPhoton().leadingPhoton.hasPixelSeed",
                    "pho2_hasPixelSeed   := diPhoton().subLeadingPhoton.hasPixelSeed",
                    "pho1_sigmaEOverE    := diPhoton().leadingPhoton.sigEOverE()",
                    "pho2_sigmaEOverE    := diPhoton().subLeadingPhoton.sigEOverE()",
                    "pho1_ptoM           := diPhoton().leadingPhoton.pt / diPhoton().mass",
                    "pho2_ptoM           := diPhoton().subLeadingPhoton.pt / diPhoton().mass",
                    "pho1_et             := diPhoton().leadingPhoton.et",
                    "pho2_et             := diPhoton().subLeadingPhoton.et",
                    "pho1_energy         := diPhoton().leadingPhoton.energy",
                    "pho2_energy         := diPhoton().subLeadingPhoton.energy",
                    "pho1_eta            := diPhoton().leadingPhoton.eta",
                    "pho2_eta            := diPhoton().subLeadingPhoton.eta",
                    "pho1_phi            := diPhoton().leadingPhoton.phi",
                    "pho2_phi            := diPhoton().subLeadingPhoton.phi",
                    "pho1_sigmaIetaIeta  := diPhoton().leadingPhoton.sigmaIetaIeta",
                    "pho2_sigmaIetaIeta  := diPhoton().subLeadingPhoton.sigmaIetaIeta",
                    "pho1_hadronicOverEm := diPhoton().leadingPhoton.hadronicOverEm",
                    "pho2_hadronicOverEm := diPhoton().subLeadingPhoton.hadronicOverEm",
                    "pho1_isEB           := diPhoton().leadingPhoton.isEB",
                    "pho2_isEB           := diPhoton().subLeadingPhoton.isEB",
                    "pho1_sceta          := diPhoton().leadingPhoton.superCluster.eta",
                    "pho2_sceta          := diPhoton().subLeadingPhoton.superCluster.eta",
                    "pho1_scphi          := diPhoton().leadingPhoton.superCluster.phi",
                    "pho2_scphi          := diPhoton().subLeadingPhoton.superCluster.phi",
                    "pho1_idmva          := diPhoton().leadingView.phoIdMvaWrtChosenVtx",
                    "pho2_idmva          := diPhoton().subLeadingView.phoIdMvaWrtChosenVtx",
                    "pho1_eleveto        := diPhoton().leadingPhoton().passElectronVeto",
                    "pho2_eleveto        := diPhoton().subLeadingPhoton().passElectronVeto",
                    "maxPhoID            := max(diPhoton().leadingView.phoIdMvaWrtChosenVtx,diPhoton.subLeadingView.phoIdMvaWrtChosenVtx)",
                    "minPhoID            := min(diPhoton().leadingView.phoIdMvaWrtChosenVtx,diPhoton.subLeadingView.phoIdMvaWrtChosenVtx)",
                    "pho1_r9             := diPhoton().leadingPhoton.full5x5_r9",
                    "pho2_r9             := diPhoton().subLeadingPhoton.full5x5_r9",
                    "pho1_genmatch       := ?(diPhoton().leadingPhoton.hasGenMatchType)? diPhoton().leadingPhoton.genMatchType : -999",
                    "pho2_genmatch       := ?(diPhoton().subLeadingPhoton.hasGenMatchType)? diPhoton().subLeadingPhoton.genMatchType : -999",
                    "pho1_genmatchPt     := ?(diPhoton().leadingPhoton.hasMatchedGenPhoton)? diPhoton().leadingPhoton.matchedGenPhoton.pt : 0",
                    "pho2_genmatchPt     := ?(diPhoton().subLeadingPhoton.hasMatchedGenPhoton)? diPhoton().subLeadingPhoton.matchedGenPhoton.pt : 0",
                    "pho1_genmatchDeltaR := ?(diPhoton().leadingPhoton.hasMatchedGenPhoton)? sqrt( pow((diPhoton().leadingPhoton.phi - diPhoton().leadingPhoton.matchedGenPhoton.phi), 2) + pow((diPhoton().leadingPhoton.phi - diPhoton().leadingPhoton.matchedGenPhoton.phi), 2)) : -999",
                    "pho2_genmatchDeltaR := ?(diPhoton().subLeadingPhoton.hasMatchedGenPhoton)? sqrt( pow((diPhoton().subLeadingPhoton.phi - diPhoton().subLeadingPhoton.matchedGenPhoton.phi), 2) + pow((diPhoton().subLeadingPhoton.phi - diPhoton().subLeadingPhoton.matchedGenPhoton.phi), 2)) : -999",
                    "vtxZ                := diPhoton().vtx().z",
                    "vtxI                := diPhoton().vertexIndex"
                ]

    
weight_variables = ["weight_totalWeight           := weight(\"totalWeight\")",
                    "weight_lumiWeight            := weight(\"lumiWeightCentral\")",
                    "weight_electronVetoSF        := weight(\"electronVetoSFCentral\")",
                    "weight_PreselSF              := weight(\"PreselSFCentral\")",
                    "weight_TriggerWeight         := weight(\"TriggerWeightCentral\")",
                    "weight_LooseMvaSF            := weight(\"LooseMvaSFCentral\")",
                    "weight_PixelSeedWeight       := weight(\"PixelSeedWeightCentral\")",
                    "weight_FracRVWeight          := weight(\"FracRVWeightCentral\")",
                    "weight_FracRVNvtxWeight      := weight(\"FracRVNvtxWeightCentral\")",
                    "weight_SigmaEOverESmearing   := weight(\"SigmaEOverESmearingCentral\")",
                    "weight_MuonMediumIDWeight    := weight(\"MuonMediumIDWeightCentral\")",
                    "weight_MuonLooseRelISOWeight := weight(\"MuonLooseRelISOWeightCentral\")",
                    "weight_MuonWeight            := weight(\"MuonWeightCentral\")",
                    "weight_ElectronWeight        := weight(\"ElectronWeightCentral\")",
                    "weight_JEC                   := weight(\"JECCentral\")",
                    "weight_JER                   := weight(\"JERCentral\")",
                    "weight_JetBTagWeight         := weight(\"JetBTagWeightCentral\")",
                    "weight_JetBTagCutWeight      := weight(\"JetBTagCutWeightCentral\")",
                    "weight_JetBTagReshapeWeight  := weight(\"JetBTagReshapeWeightCentral\")",
                    "weight_SigmaEOverEShift      := weight(\"SigmaEOverEShiftCentral\")",
                    "weight_SigmaEOverESmearing   := weight(\"SigmaEOverESmearingCentral\")",    
                    "weight_puweight              := weight(\"puweightCentral\")"
                ]

ttHLeptonic_variables = ["leadPrompt            := leadPrompt",
                         "subLeadPrompt         := subleadPrompt",
                         "leadMad               := leadMad",
                         "subLeadMad            := subleadMad",
                         "leadPythia            := leadPythia",
                         "subLeadPythia         := subleadPythia",
                         "leadMomID             := leadMomID",
                         "subLeadMomID          := subleadMomID",
                         "leadMomMomID          := leadMomMomID",
                         "subLeadMomMomID       := subleadMomMomID",
                         "leadPassFrix          := leadPassFrix",
                         "subLeadPassFrix       := subleadPassFrix",
                         "diPhoHelicity         := diPhoHelicity",
                         "nLep                  := electrons.size+muons.size",
                         "nLepTight             := nLepTight",
                         "lepPt_1               := ?(electrons.size+muons.size>=1)? leptonsPt.at(0) : -1",
                         "lepE_1                := ?(electrons.size+muons.size>=1)? leptonsE.at(0) :  -1",
                         "lepEta_1              := ?(electrons.size+muons.size>=1)? leptonsEta.at(0) : -6",
                         "lepPhi_1              := ?(electrons.size+muons.size>=1)? leptonsPhi.at(0) : -6",
                         "lepCharge_1           := ?(electrons.size+muons.size>=1)? leptonsCharge.at(0) : -6",
                         "lepType_1             := ?(electrons.size+muons.size>=1)? leptonsType.at(0) : -1",
                         "lepPt_2               := ?(electrons.size+muons.size>=2)? leptonsPt.at(1) : -1",
                         "lepE_2                := ?(electrons.size+muons.size>=2)? leptonsE.at(1) :  -1",
                         "lepEta_2              := ?(electrons.size+muons.size>=2)? leptonsEta.at(1) : -6",
                         "lepPhi_2              := ?(electrons.size+muons.size>=2)? leptonsPhi.at(1) : -6",
                         "lepCharge_2           := ?(electrons.size+muons.size>=2)? leptonsCharge.at(1) : -6",
                         "lepType_2             := ?(electrons.size+muons.size>=2)? leptonsType.at(1) : -1",
                         "nElec                 := electrons.size",
                         "elecPt_1              := ?(electrons.size>0)? electrons.at(0).pt : -1",
                         "elecEta_1             := ?(electrons.size>0)? electrons.at(0).eta : -6",
                         "elecPhi_1             := ?(electrons.size>0)? electrons.at(0).phi : -6",
                         "elecCh_1              := ?(electrons.size>0)? electrons.at(0).charge : -6",
                         "elecScEta_1           := ?(electrons.size>0)? electrons.at(0).superCluster.eta : -6",
                         "elecScPhi_1           := ?(electrons.size>0)? electrons.at(0).superCluster.phi : -6",
                         "dRPhoLeadElec_1       := ?(electrons.size>0)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, electrons.at(0).eta, electrons.at(0).phi) : -9",
                         "dRPhoSubLeadElec_1    := ?(electrons.size>0)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, electrons.at(0).eta, electrons.at(0).phi) : -9",
                         "elecMVATightId_1      := ?(electrons.size>0)? electrons.at(0).passMVATightId : -9",
                         "elecMVAMediumId_1     := ?(electrons.size>0)? electrons.at(0).passMVAMediumId : -9",
                         "elecLooseId_1         := ?(electrons.size>0)? electrons.at(0).passLooseId : -9",
                         "elecMediumId_1        := ?(electrons.size>0)? electrons.at(0).passMediumId : -9",
                         "elecVetoId_1          := ?(electrons.size>0)? electrons.at(0).passVetoId : -9",
                         "elecMiniIso_1         := ?(electrons.size>0)? electrons.at(0).fggMiniIsoSumRel : -9",
                         "nMuons                := muons.size",
                         "muPt_1                := ?(muons.size>0)? muons.at(0).pt : -1",
                         "muEta_1               := ?(muons.size>0)? muons.at(0).eta : -6",
                         "muPhi_1               := ?(muons.size>0)? muons.at(0).phi : -6",
                         "muCh_1                := ?(muons.size>0)? muons.at(0).charge : -6",
                         "dRPhoLeadMuon_1       := ?(muons.size>0)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, muons.at(0).eta, muons.at(0).phi) : -9",
                         "dRPhoSubLeadMuon_1    := ?(muons.size>0)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, muons.at(0).eta, muons.at(0).phi) : -9",
                         "tthMVA                := mvaRes",
                         "nJets                 := jets.size",
                         "nJetsBm               := nBMedium",
                         "nJetsBl               := nBLoose",
                         "nJetsBt               := nBTight",
                         "leadJetPt             := ?(jets.size>0)? jets.at(0).pt : 0.",
                         "subLeadJetPt          := ?(jets.size>1)? jets.at(1).pt : 0.",
                         "sumJetPt              := sumJetPt",
                         "maxBTagVal            := maxBTagVal",
                         "secondMaxBTagVal      := secondMaxBTagVal",
                         "thirdMaxBTagVal       := thirdMaxBTagVal",
                         "fourthMaxBTagVal      := fourthMaxBTagVal",
                         "maxBTagVal_noBB       := maxBTagVal_noBB",
                         "secondMaxBTagVal_noBB := secondMaxBTagVal_noBB",
                         "fwdjetPt              := fwdjetPt",
                         "fwdjetEta             := fwdjetEta",
                         "fwdjetPhi             := fwdjetPhi",
                         #"dRPhoLeadFwdjet       := getdRleadphofwdjet()",
                         #"dRPhoSubLeadFwdjet    := getdRsubleadphofwdjet()",
                         "jetPt_1               := ?(jets.size>0)? jets.at(0).pt : -1",
                         "jetE_1                := ?(jets.size>0)? jets.at(0).energy : -1",
                         "jetEta_1              := ?(jets.size>0)? jets.at(0).eta : -6",
                         "jetPhi_1              := ?(jets.size>0)? jets.at(0).phi : -6",
                         "mindRPhoLeadJet       := ?(jets.size>1)? min(deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi,  jets.at(0).eta,  jets.at(0).phi),deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jets.at(1).eta, jets.at(1).phi)) : -9 ",
                         "maxdRPhoLeadJet       := ?(jets.size>1)? max(deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi,  jets.at(0).eta,  jets.at(0).phi),deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jets.at(1).eta, jets.at(1).phi)) : -9 ",
                         "dRPhoLeadJet_1        := ?(jets.size>0)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jets.at(0).eta, jets.at(0).phi) : -9",
                         "dRPhoSubLeadJet_1     := ?(jets.size>0)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jets.at(0).eta, jets.at(0).phi) : -9",
                         "btag_1                := ?(jets.size>0)? jets.at(0).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(0).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_1                := ?(jets.size>0)? jets.at(0).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(0).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_1                := ?(jets.size>0)? jets.at(0).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(0).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(0).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetHFlav_1            := ?(jets.size>0)? jets.at(0).hadronFlavour : -9",
                         "jetPFlav_1            := ?(jets.size>0)? jets.at(0).partonFlavour : -9",
                         "jetPt_2               := ?(jets.size>1)? jets.at(1).pt : -1",
                         "jetE_2                := ?(jets.size>1)? jets.at(1).energy : -1",
                         "jetEta_2              := ?(jets.size>1)? jets.at(1).eta : -6",
                         "jetPhi_2              := ?(jets.size>1)? jets.at(1).phi : -6",
                         "dRPhoLeadJet_2        := ?(jets.size>1)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jets.at(1).eta, jets.at(1).phi) : -9",
                         "dRPhoSubLeadJet_2     := ?(jets.size>1)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jets.at(1).eta, jets.at(1).phi) : -9",
                         "btag_2                := ?(jets.size>1)? jets.at(1).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(1).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_2                := ?(jets.size>1)? jets.at(1).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(1).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_2                := ?(jets.size>1)? jets.at(1).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(1).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(1).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetHFlav_2            := ?(jets.size>1)? jets.at(1).hadronFlavour : -9",
                         "jetPFlav_2            := ?(jets.size>1)? jets.at(1).partonFlavour : -9",
                         "jetPt_3               := ?(jets.size>2)? jets.at(2).pt : -1",
                         "jetE_3                := ?(jets.size>2)? jets.at(2).energy : -1",
                         "jetEta_3              := ?(jets.size>2)? jets.at(2).eta : -6",
                         "jetPhi_3              := ?(jets.size>2)? jets.at(2).phi : -6",
                         "dRPhoLeadJet_3        := ?(jets.size>2)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jets.at(2).eta, jets.at(2).phi) : -9",
                         "dRPhoSubLeadJet_3     := ?(jets.size>2)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jets.at(2).eta, jets.at(2).phi) : -9",
                         "btag_3                := ?(jets.size>2)? jets.at(2).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(2).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_3                := ?(jets.size>2)? jets.at(2).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(2).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_3                := ?(jets.size>2)? jets.at(2).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(2).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(2).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetPt_4               := ?(jets.size>3)? jets.at(3).pt : -1",
                         "jetE_4                := ?(jets.size>3)? jets.at(3).energy : -1",
                         "jetEta_4              := ?(jets.size>3)? jets.at(3).eta : -6",
                         "jetPhi_4              := ?(jets.size>3)? jets.at(3).phi : -6",
                         "dRPhoLeadJet_4        := ?(jets.size>3)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jets.at(3).eta, jets.at(3).phi) : -9",
                         "dRPhoSubLeadJet_4     := ?(jets.size>3)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jets.at(3).eta, jets.at(3).phi) : -9",
                         "btag_4                := ?(jets.size>3)? jets.at(3).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(3).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_4                := ?(jets.size>3)? jets.at(3).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(3).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_4                := ?(jets.size>3)? jets.at(3).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(3).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(3).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetPt_5               := ?(jets.size>4)? jets.at(4).pt : -1",
                         "jetE_5                := ?(jets.size>4)? jets.at(4).energy : -1",
                         "jetEta_5              := ?(jets.size>4)? jets.at(4).eta : -6",
                         "jetPhi_5              := ?(jets.size>4)? jets.at(4).phi : -6",
                         "dRPhoLeadJet_5        := ?(jets.size>4)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jets.at(4).eta, jets.at(4).phi) : -9",
                         "dRPhoSubLeadJet_5     := ?(jets.size>4)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jets.at(4).eta, jets.at(4).phi) : -9",
                         "btag_5                := ?(jets.size>4)? jets.at(4).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(4).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_5                := ?(jets.size>4)? jets.at(4).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(4).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_5                := ?(jets.size>4)? jets.at(4).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(4).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(4).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetPt_6               := ?(jets.size>5)? jets.at(5).pt : -1",
                         "jetE_6                := ?(jets.size>5)? jets.at(5).energy : -1",
                         "jetEta_6              := ?(jets.size>5)? jets.at(5).eta : -6",
                         "jetPhi_6              := ?(jets.size>5)? jets.at(5).phi : -6",
                         "btag_6                := ?(jets.size>5)? jets.at(5).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(5).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_6                := ?(jets.size>5)? jets.at(5).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(5).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_6                := ?(jets.size>5)? jets.at(5).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(5).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(5).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "dRPhoLeadJet_6        := ?(jets.size>5)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jets.at(5).eta, jets.at(5).phi) : -9",
                         "dRPhoSubLeadJet_6     := ?(jets.size>5)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jets.at(5).eta, jets.at(5).phi) : -9",
                         "jetPt_7               := ?(jets.size>6)? jets.at(6).pt : -1",
                         "jetE_7                := ?(jets.size>6)? jets.at(6).energy : -1",
                         "jetEta_7              := ?(jets.size>6)? jets.at(6).eta : -6",
                         "jetPhi_7              := ?(jets.size>6)? jets.at(6).phi : -6",
                         "btag_7                := ?(jets.size>6)? jets.at(6).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(6).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_7                := ?(jets.size>6)? jets.at(6).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(6).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_7                := ?(jets.size>6)? jets.at(6).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(6).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(6).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "dRPhoLeadJet_7        := ?(jets.size>6)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jets.at(6).eta, jets.at(6).phi) : -9",
                         "dRPhoSubLeadJet_7     := ?(jets.size>6)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jets.at(6).eta, jets.at(6).phi) : -9",
                         "jetPt_8               := ?(jets.size>7)? jets.at(7).pt : -1",
                         "jetE_8                := ?(jets.size>7)? jets.at(7).energy : -1",
                         "jetEta_8              := ?(jets.size>7)? jets.at(7).eta : -6",
                         "jetPhi_8              := ?(jets.size>7)? jets.at(7).phi : -6",
                         "btag_8                := ?(jets.size>7)? jets.at(7).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(7).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_8                := ?(jets.size>7)? jets.at(7).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(7).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_8                := ?(jets.size>7)? jets.at(7).bDiscriminator('pfDeepCSVJetTags:probc')+jets.at(7).bDiscriminator('pfDeepCSVJetTags:probb')+jets.at(7).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "dRPhoLeadJet_8        := ?(jets.size>7)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jets.at(7).eta, jets.at(7).phi) : -9",
                         "dRPhoSubLeadJet_8     := ?(jets.size>7)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jets.at(7).eta, jets.at(7).phi) : -9",
                         "MET                   := met.getCorPt",
                         "METPx                 := met.getCorPx",
                         "METPy                 := met.getCorPy",
                         "METPhi                := met.phi",
                         "bjetPt_1              := ?(bJets.size>0)? bJets.at(0).pt : -1",
                         "bjetE_1               := ?(bJets.size>0)? bJets.at(0).energy : -1",
                         "bjetEta_1             := ?(bJets.size>0)? bJets.at(0).eta : -6",
                         "bjetPhi_1             := ?(bJets.size>0)? bJets.at(0).phi : -6",
                         "bjetBtag_1            := ?(bJets.size>0)? bJets.at(0).bDiscriminator('pfDeepCSVJetTags:probb')+ bJets.at(0).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "bjetHFlav_1           := ?(bJets.size>0)? bJets.at(0).hadronFlavour() : -9",
                         "bjetPFlav_1           := ?(bJets.size>0)? bJets.at(0).partonFlavour() : -9",
                         "bjetPt_2              := ?(bJets.size>1)? bJets.at(1).pt : -1",
                         "bjetE_2               := ?(bJets.size>1)? bJets.at(1).energy : -1",
                         "bjetEta_2             := ?(bJets.size>1)? bJets.at(1).eta : -6",
                         "bjetPhi_2             := ?(bJets.size>1)? bJets.at(1).phi : -6",
                         "bjetBtag_2            := ?(bJets.size>1)? bJets.at(1).bDiscriminator('pfDeepCSVJetTags:probb')+ bJets.at(1).bDiscriminator('pfDeepCSVJetTags:probbb')  : -1",
                         "bjetHFlav_2           := ?(bJets.size>1)? bJets.at(1).hadronFlavour() : -9",
                         "bjetPFlav_2           := ?(bJets.size>1)? bJets.at(1).partonFlavour() : -9",
                         "bjetPt_3              := ?(bJets.size>2)? bJets.at(2).pt : -1",
                         "bjetE_3               := ?(bJets.size>2)? bJets.at(2).energy : -1",
                         "bjetEta_3             := ?(bJets.size>2)? bJets.at(2).eta : -6",
                         "bjetPhi_3             := ?(bJets.size>2)? bJets.at(2).phi : -6",
                         "bjetBtag_3            := ?(bJets.size>2)? bJets.at(2).bDiscriminator('pfDeepCSVJetTags:probb')+ bJets.at(2).bDiscriminator('pfDeepCSVJetTags:probbb')  : -1",
                         "bjetHFlav_3           := ?(bJets.size>2)? bJets.at(2).hadronFlavour() : -9",
                         "bjetPFlav_3           := ?(bJets.size>2)? bJets.at(2).partonFlavour() : -9",
                         #"topMt                := gettop_mt()",
                         #"dRtHchainFwdjet      := getdRtHchainfwdjet()",
                         #"dRLeptonBjet         := getdRleptonbjet()",
                         #"dRLeptonFwdjet       := getdRleptonfwdjet()",
                         #"dRBjetFwdjet         := getdRbjetfwdjet()"
                     ]

ttHHadronic_variables = ["diPhoHelicity        := diPhoHelicity",
                         "nJets                := nJet",
                         "nJetsBm              := nBMedium",
                         "nJetsBl              := nBLoose",
                         "nJetsBt              := nBTight",
                         "leadJetPt            := leadJetPt",
                         "subLeadJetPt         := subLeadJetPt",
                         "sumJetPt             := sumJetPt",
                         "maxBTagVal           := maxBTagVal",
                         "secondMaxBTagVal     := secondMaxBTagVal",
                         "thirdMaxBTagVal      := thirdMaxBTagVal",
                         "fourthMaxBTagVal     := fourthMaxBTagVal",
                         "fwdjetPt             := fwdjetPt",
                         "fwdjetEta            := fwdjetEta",
                         "fwdjetPhi            := fwdjetPhi",
                         #"dRPhoLeadFwdjet_1    := getdRleadphofwdjet()",
                         #"dRPhoSubLeadFwdjet_1 := getdRsubleadphofwdjet()",
                         "jetPt_1              := ?(jetVector.size>0)? jetVector.at(0).pt : -1",
                         "jetE_1               := ?(jetVector.size>0)? jetVector.at(0).energy : -1",
                         "jetEta_1             := ?(jetVector.size>0)? jetVector.at(0).eta : -6",
                         "jetPhi_1             := ?(jetVector.size>0)? jetVector.at(0).phi : -6",
                         "mindRPhoLeadJet      := ?(jetVector.size>1)? min(deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi,  jetVector.at(0).eta,  jetVector.at(0).phi),deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jetVector.at(1).eta, jetVector.at(1).phi)) : -9 ",
                         "maxdRPhoLeadJet      := ?(jetVector.size>1)? max(deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi,  jetVector.at(0).eta,  jetVector.at(0).phi),deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jetVector.at(1).eta, jetVector.at(1).phi)) : -9 ",                        
                         "dRPhoLeadJet_1       := ?(jetVector.size>0)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jetVector.at(0).eta, jetVector.at(0).phi) : -9",
                         "dRPhoSubLeadJet_1    := ?(jetVector.size>0)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jetVector.at(0).eta, jetVector.at(0).phi) : -9",
                         "btag_1               := ?(jetVector.size>0)? jetVector.at(0).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(0).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_1               := ?(jetVector.size>0)? jetVector.at(0).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(0).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_1               := ?(jetVector.size>0)? jetVector.at(0).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(0).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(0).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetHFlav_1           := ?(jetVector.size>0)? jetVector.at(0).hadronFlavour : -9", 
                         "jetPFlav_1           := ?(jetVector.size>0)? jetVector.at(0).partonFlavour : -9",    
                         "jetPt_2              := ?(jetVector.size>1)? jetVector.at(1).pt : -1",
                         "jetE_2               := ?(jetVector.size>1)? jetVector.at(1).energy : -1",
                         "jetEta_2             := ?(jetVector.size>1)? jetVector.at(1).eta : -6",
                         "jetPhi_2             := ?(jetVector.size>1)? jetVector.at(1).phi : -6",
                         "dRPhoLeadJet_2       := ?(jetVector.size>1)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jetVector.at(1).eta, jetVector.at(1).phi) : -9",
                         "dRPhoSubLeadJet_2    := ?(jetVector.size>1)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jetVector.at(1).eta, jetVector.at(1).phi) : -9",
                         "btag_2               := ?(jetVector.size>1)? jetVector.at(1).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(1).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_2               := ?(jetVector.size>1)? jetVector.at(1).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(1).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_2               := ?(jetVector.size>1)? jetVector.at(1).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(1).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(1).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetHFlav_2           := ?(jetVector.size>1)? jetVector.at(1).hadronFlavour : -9", 
                         "jetPFlav_2           := ?(jetVector.size>1)? jetVector.at(1).partonFlavour : -9", 
                         "jetPt_3              := ?(jetVector.size>2)? jetVector.at(2).pt : -1",
                         "jetE_3               := ?(jetVector.size>2)? jetVector.at(2).energy : -1",
                         "jetEta_3             := ?(jetVector.size>2)? jetVector.at(2).eta : -6",
                         "jetPhi_3             := ?(jetVector.size>2)? jetVector.at(2).phi : -6",
                         "dRPhoLeadJet_3       := ?(jetVector.size>2)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jetVector.at(2).eta, jetVector.at(2).phi) : -9",
                         "dRPhoSubLeadJet_3    := ?(jetVector.size>2)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jetVector.at(2).eta, jetVector.at(2).phi) : -9",
                         "btag_3               := ?(jetVector.size>2)? jetVector.at(2).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(2).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_3               := ?(jetVector.size>2)? jetVector.at(2).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(2).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_3               := ?(jetVector.size>2)? jetVector.at(2).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(2).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(2).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetPt_4              := ?(jetVector.size>3)? jetVector.at(3).pt : -1",
                         "jetE_4               := ?(jetVector.size>3)? jetVector.at(3).energy : -1",
                         "jetEta_4             := ?(jetVector.size>3)? jetVector.at(3).eta : -6",
                         "jetPhi_4             := ?(jetVector.size>3)? jetVector.at(3).phi : -6",
                         "dRPhoLeadJet_4       := ?(jetVector.size>3)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jetVector.at(3).eta, jetVector.at(3).phi) : -9",
                         "dRPhoSubLeadJet_4    := ?(jetVector.size>3)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jetVector.at(3).eta, jetVector.at(3).phi) : -9",
                         "btag_4               := ?(jetVector.size>3)? jetVector.at(3).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(3).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_4               := ?(jetVector.size>3)? jetVector.at(3).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(3).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_4               := ?(jetVector.size>3)? jetVector.at(3).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(3).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(3).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetPt_5              := ?(jetVector.size>4)? jetVector.at(4).pt : -1",
                         "jetE_5               := ?(jetVector.size>4)? jetVector.at(4).energy : -1",
                         "jetEta_5             := ?(jetVector.size>4)? jetVector.at(4).eta : -6",
                         "jetPhi_5             := ?(jetVector.size>4)? jetVector.at(4).phi : -6",
                         "dRPhoLeadJet_5       := ?(jetVector.size>4)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jetVector.at(4).eta, jetVector.at(4).phi) : -9",
                         "dRPhoSubLeadJet_5    := ?(jetVector.size>4)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jetVector.at(4).eta, jetVector.at(4).phi) : -9",
                         "btag_5               := ?(jetVector.size>4)? jetVector.at(4).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(4).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_5               := ?(jetVector.size>4)? jetVector.at(4).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(4).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_5               := ?(jetVector.size>4)? jetVector.at(4).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(4).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(4).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetPt_6              := ?(jetVector.size>5)? jetVector.at(5).pt : -1",
                         "jetE_6               := ?(jetVector.size>5)? jetVector.at(5).energy : -1",
                         "jetEta_6             := ?(jetVector.size>5)? jetVector.at(5).eta : -6",
                         "jetPhi_6             := ?(jetVector.size>5)? jetVector.at(5).phi : -6",
                         "dRPhoLeadJet_6       := ?(jetVector.size>5)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jetVector.at(5).eta, jetVector.at(5).phi) : -9",
                         "dRPhoSubLeadJet_6    := ?(jetVector.size>5)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jetVector.at(5).eta, jetVector.at(5).phi) : -9",
                         "btag_6               := ?(jetVector.size>5)? jetVector.at(5).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(5).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "cvsl_6               := ?(jetVector.size>5)? jetVector.at(5).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(5).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_6               := ?(jetVector.size>5)? jetVector.at(5).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(5).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(5).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetPt_7              := ?(jetVector.size>6)? jetVector.at(6).pt : -9",
                         "jetEta_7             := ?(jetVector.size>6)? jetVector.at(6).eta : -9",
                         "jetPhi_7             := ?(jetVector.size>6)? jetVector.at(6).phi : -9",
                         "dRPhoLeadJet_7       := ?(jetVector.size>6)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jetVector.at(6).eta, jetVector.at(6).phi) : -9",
                         "dRPhoSubLeadJet_7    := ?(jetVector.size>6)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jetVector.at(6).eta, jetVector.at(6).phi) : -9",
                         "btag_7               := ?(jetVector.size>6)? jetVector.at(6) : -1",
                         "cvsl_7               := ?(jetVector.size>6)? jetVector.at(6).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(6).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_7               := ?(jetVector.size>6)? jetVector.at(6).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(6).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(6).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "jetPt_8              := ?(jetVector.size>7)? jetVector.at(7).pt : -9",
                         "jetEta_8             := ?(jetVector.size>7)? jetVector.at(7).eta : -9",
                         "jetPhi_8             := ?(jetVector.size>7)? jetVector.at(7).phi : -9",
                         "dRPhoLeadJet_8       := ?(jetVector.size>7)? deltaR(diPhoton().leadingPhoton.eta, diPhoton().leadingPhoton.phi, jetVector.at(7).eta, jetVector.at(7).phi) : -9",
                         "dRPhoSubLeadJet_8    := ?(jetVector.size>7)? deltaR(diPhoton().subLeadingPhoton.eta, diPhoton().subLeadingPhoton.phi, jetVector.at(7).eta, jetVector.at(7).phi) : -9",
                         "btag_8               := ?(jetVector.size>7)? jetVector.at(7) : -1",
                         "cvsl_8               := ?(jetVector.size>7)? jetVector.at(7).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(7).bDiscriminator('pfDeepCSVJetTags:probudsg') : -1",
                         "cvsb_8               := ?(jetVector.size>7)? jetVector.at(7).bDiscriminator('pfDeepCSVJetTags:probc')+jetVector.at(7).bDiscriminator('pfDeepCSVJetTags:probb')+jetVector.at(7).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "MET                  := met.getCorPt",
                         "METPx                := met.getCorPx",
                         "METPy                := met.getCorPy",
                         "METPhi               := met.phi",
                         "bjetPt_1             := ?(bJetVector.size>0)? bJetVector.at(0).pt : -1",
                         "bjetE_1              := ?(bJetVector.size>0)? bJetVector.at(0).energy : -1",
                         "bjetEta_1            := ?(bJetVector.size>0)? bJetVector.at(0).eta : -6",
                         "bjetPhi_1            := ?(bJetVector.size>0)? bJetVector.at(0).phi : -6",
                         "bjetBtag_1           := ?(bJetVector.size>0)? bJetVector.at(0).bDiscriminator('pfDeepCSVJetTags:probb')+ bJetVector.at(0).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "bjetHFlav_1          := ?(bJetVector.size>0)? bJetVector.at(0).hadronFlavour() : -9",
                         "bjetPFlav_1          := ?(bJetVector.size>0)? bJetVector.at(0).partonFlavour() : -9",
                         "bjetPt_2             := ?(bJetVector.size>1)? bJetVector.at(1).pt : -1", 
                         "bjetE_2              := ?(bJetVector.size>1)? bJetVector.at(1).energy : -1",
                         "bjetEta_2            := ?(bJetVector.size>1)? bJetVector.at(1).eta : -6",
                         "bjetPhi_2            := ?(bJetVector.size>1)? bJetVector.at(1).phi : -6",
                         "bjetBtag_2           := ?(bJetVector.size>1)? bJetVector.at(1).bDiscriminator('pfDeepCSVJetTags:probb')+ bJetVector.at(1).bDiscriminator('pfDeepCSVJetTags:probbb')  : -1",
                         "bjetHFlav_2          := ?(bJetVector.size>1)? bJetVector.at(1).hadronFlavour() : -9",
                         "bjetPFlav_2          := ?(bJetVector.size>1)? bJetVector.at(1).partonFlavour() : -9",
                         "bjetPt_3             := ?(bJetVector.size>2)? bJetVector.at(2).pt : -1",
                         "bjetE_3              := ?(bJetVector.size>2)? bJetVector.at(2).energy : -1",
                         "bjetEta_3            := ?(bJetVector.size>2)? bJetVector.at(2).eta : -6",
                         "bjetPhi_3            := ?(bJetVector.size>2)? bJetVector.at(2).phi : -6",
                         "bjetBtag_3           := ?(bJetVector.size>2)? bJetVector.at(2).bDiscriminator('pfDeepCSVJetTags:probb')+ bJetVector.at(0).bDiscriminator('pfDeepCSVJetTags:probbb') : -1",
                         "bjetHFlav_3          := ?(bJetVector.size>2)? bJetVector.at(2).hadronFlavour() : -9",
                         "bjetPFlav_3          := ?(bJetVector.size>2)? bJetVector.at(2).partonFlavour() : -9",
                         #"topMt                := gettop_mt()",
                         #"dRtHchainFwdjet      := getdRtHchainfwdjet()",
                         #"dRBjetFwdjet         := getdRbjetfwdjet()",
                         "tthMva               := tthMvaRes"
                     ]

